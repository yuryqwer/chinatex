# chinatax
本项目的目标是使用机器学习算法识别国税总局验证码。

## 数据获取
验证集和测试集必须与真实环境保持一致，因此需要从[国税总局官网](https://inv-veri.chinatax.gov.cn)上进行采集，`tag_img.py`就是用于这一目的的采集脚本，运行此脚本后会打开一个Chromium浏览器，自动填写发票代码和发票号码并等待用户在终端输入验证码的标签，输入完成后回车，验证码会自动以用户输入的标签命名图片并保存至`real_img`目录下。

标签的格式为`color_text`，也就是先标记颜色后标记文本内容，其中颜色`B` `U` `R` `Y`分别表示黑蓝红黄四种颜色。如果看不出图中的验证码是什么，想要换一张，直接回车即可。

此项目的训练数据起码需要百万级别的数据，光靠手动标注是不现实的，因此根据观察自己写了一套验证码生成算法，用于生成训练数据，但是生成的数据毕竟和真实数据不是一回事，所以需要引入***训练开发集***的概念，在训练数据中预留一部分作为训练开发集，如果训练后的模型在这个训练开发集上表现良好，但是在验证集上面表现不佳，说明验证码生成算法还需要改善，使其更接近官网上采集的数据。

## 数据生成
观察一下采集的数据可以发现要么是4个字符，要么是6个字符，统计下来两种比例大概是`5:9`；其中4个字符中可能包含0-2个中文字符，比例分别为`20:3:3`，6个字符中可能包含0-3个中文字符，比例分别为`6:1:1:1`，且中文字符都在最前面。